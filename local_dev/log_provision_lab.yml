ansible-playbook 2.8.2
  config file = /Users/craig/workshops/ansible/workshops/provisioner/ansible.cfg
  configured module search path = ['/Users/craig/.ansible/plugins/modules', '/usr/share/ansible/plugins/modules']
  ansible python module location = /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible
  executable location = /Users/craig/Library/Python/3.7/bin/ansible-playbook
  python version = 3.7.3 (default, Jun 19 2019, 07:38:49) [Clang 10.0.1 (clang-1001.0.46.4)]
Using /Users/craig/workshops/ansible/workshops/provisioner/ansible.cfg as config file
host_list declined parsing /Users/craig/workshops/ansible/workshops/provisioner/hosts as it did not pass it's verify_file() method
Skipping due to inventory source not existing or not being readable by the current user
script declined parsing /Users/craig/workshops/ansible/workshops/provisioner/hosts as it did not pass it's verify_file() method
auto declined parsing /Users/craig/workshops/ansible/workshops/provisioner/hosts as it did not pass it's verify_file() method
Skipping due to inventory source not existing or not being readable by the current user
yaml declined parsing /Users/craig/workshops/ansible/workshops/provisioner/hosts as it did not pass it's verify_file() method
Skipping due to inventory source not existing or not being readable by the current user
ini declined parsing /Users/craig/workshops/ansible/workshops/provisioner/hosts as it did not pass it's verify_file() method
Skipping due to inventory source not existing or not being readable by the current user
toml declined parsing /Users/craig/workshops/ansible/workshops/provisioner/hosts as it did not pass it's verify_file() method

PLAYBOOK: provision_lab.yml *******************************************************************
20 plays in provision_lab.yml

PLAY [Perform Checks to make sure this Playbook will complete successfully] *******************

TASK [Gathering Facts] ************************************************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:1
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215133.625979-133732121290287 `" && echo ansible-tmp-1563215133.625979-133732121290287="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215133.625979-133732121290287 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/system/setup.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmp2fz4y1ox TO /Users/craig/.ansible/tmp/ansible-tmp-1563215133.625979-133732121290287/AnsiballZ_setup.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215133.625979-133732121290287/ /Users/craig/.ansible/tmp/ansible-tmp-1563215133.625979-133732121290287/AnsiballZ_setup.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215133.625979-133732121290287/AnsiballZ_setup.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215133.625979-133732121290287/ > /dev/null 2>&1 && sleep 0'
ok: [localhost]
META: ran handlers

TASK [make sure we are running correct Ansible Version] ***************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:7
ok: [localhost] => changed=false 
  msg: All assertions passed

TASK [make sure workshop_type is set to a correct value] **************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:13
ok: [localhost] => changed=false 
  msg: All assertions passed

TASK [make sure network_type is set to a correct value] ***************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:20
skipping: [localhost] => changed=false 
  skip_reason: Conditional result was False

TASK [run role to check if local environment setup will work with AWS] ************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:28

TASK [aws_check_setup : grab boto version] ****************************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/aws_check_setup/tasks/main.yml:2
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215134.9290822-52481580194371 `" && echo ansible-tmp-1563215134.9290822-52481580194371="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215134.9290822-52481580194371 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/commands/command.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmp4zsuq75p TO /Users/craig/.ansible/tmp/ansible-tmp-1563215134.9290822-52481580194371/AnsiballZ_command.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215134.9290822-52481580194371/ /Users/craig/.ansible/tmp/ansible-tmp-1563215134.9290822-52481580194371/AnsiballZ_command.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215134.9290822-52481580194371/AnsiballZ_command.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215134.9290822-52481580194371/ > /dev/null 2>&1 && sleep 0'
changed: [localhost] => changed=true 
  cmd:
  - /usr/local/opt/python/bin/python3.7
  - -c
  - import boto3; print(boto3.__version__)
  delta: '0:00:00.265863'
  end: '2019-07-15 20:25:35.584561'
  invocation:
    module_args:
      _raw_params: /usr/local/opt/python/bin/python3.7 -c 'import boto3; print(boto3.__version__)'
      _uses_shell: false
      argv: null
      chdir: null
      creates: null
      executable: null
      removes: null
      stdin: null
      stdin_add_newline: true
      strip_empty_ends: true
      warn: true
  rc: 0
  start: '2019-07-15 20:25:35.318698'
  stderr: ''
  stderr_lines: <omitted>
  stdout: 1.9.188
  stdout_lines: <omitted>

TASK [aws_check_setup : make sure we are running correct boto version] ************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/aws_check_setup/tasks/main.yml:6
ok: [localhost] => changed=false 
  msg: All assertions passed

TASK [aws_check_setup : check for underscores in workshop name] *******************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/aws_check_setup/tasks/main.yml:12
skipping: [localhost] => changed=false 
  skip_reason: Conditional result was False

TASK [aws_check_setup : FIND AZ ZONE FOR REGION us-east-1] ************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/aws_check_setup/tasks/main.yml:20
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215135.7006989-188231837672388 `" && echo ansible-tmp-1563215135.7006989-188231837672388="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215135.7006989-188231837672388 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/cloud/amazon/aws_az_facts.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmpl4t0w12p TO /Users/craig/.ansible/tmp/ansible-tmp-1563215135.7006989-188231837672388/AnsiballZ_aws_az_facts.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215135.7006989-188231837672388/ /Users/craig/.ansible/tmp/ansible-tmp-1563215135.7006989-188231837672388/AnsiballZ_aws_az_facts.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215135.7006989-188231837672388/AnsiballZ_aws_az_facts.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215135.7006989-188231837672388/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  availability_zones:
  - messages: []
    region_name: us-east-1
    state: available
    zone_id: use1-az1
    zone_name: us-east-1a
  - messages: []
    region_name: us-east-1
    state: available
    zone_id: use1-az2
    zone_name: us-east-1b
  - messages: []
    region_name: us-east-1
    state: available
    zone_id: use1-az4
    zone_name: us-east-1c
  - messages: []
    region_name: us-east-1
    state: available
    zone_id: use1-az6
    zone_name: us-east-1d
  - messages: []
    region_name: us-east-1
    state: available
    zone_id: use1-az3
    zone_name: us-east-1e
  - messages: []
    region_name: us-east-1
    state: available
    zone_id: use1-az5
    zone_name: us-east-1f
  invocation:
    module_args:
      aws_access_key: null
      aws_secret_key: null
      debug_botocore_endpoint_logs: false
      ec2_url: null
      filters: {}
      profile: null
      region: us-east-1
      security_token: null
      validate_certs: true

TASK [aws_check_setup : SET AZ ZONE TO FIRST AVAILABLE] ***************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/aws_check_setup/tasks/main.yml:28
ok: [localhost] => changed=false 
  ansible_facts:
    ec2_az: us-east-1a

TASK [aws_check_setup : grab information about AWS user] **************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/aws_check_setup/tasks/main.yml:31
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215137.764435-7283591123613 `" && echo ansible-tmp-1563215137.764435-7283591123613="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215137.764435-7283591123613 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/cloud/amazon/aws_caller_facts.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmpgjve6qu5 TO /Users/craig/.ansible/tmp/ansible-tmp-1563215137.764435-7283591123613/AnsiballZ_aws_caller_facts.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215137.764435-7283591123613/ /Users/craig/.ansible/tmp/ansible-tmp-1563215137.764435-7283591123613/AnsiballZ_aws_caller_facts.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215137.764435-7283591123613/AnsiballZ_aws_caller_facts.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215137.764435-7283591123613/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  account: '511538502769'
  account_alias: ''
  arn: arn:aws:iam::511538502769:user/ocpdemo
  invocation:
    module_args:
      aws_access_key: null
      aws_secret_key: null
      debug_botocore_endpoint_logs: false
      ec2_url: null
      profile: null
      region: us-east-1
      security_token: null
      validate_certs: true
  user_id: AIDAXOGQSDRY5MVKEFF5L

TASK [aws_check_setup : save username of AWS user] ********************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/aws_check_setup/tasks/main.yml:36
ok: [localhost] => changed=false 
  ansible_facts:
    linklight_user: ocpdemo

TASK [aws_check_setup : debug] ****************************************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/aws_check_setup/tasks/main.yml:40
ok: [localhost] => 
  msg: ocpdemo

TASK [make sure we are not running with TESTWORKSHOP as the name so no overlap] ***************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:32
ok: [localhost] => changed=false 
  msg: All assertions passed

TASK [make sure packages required are installed on this control node] *************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:37
skipping: [localhost] => changed=false 
  skip_reason: Conditional result was False

TASK [fail if previous check has changed] *****************************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:45
ok: [localhost] => changed=false 
  msg: All assertions passed

TASK [Check that the provided license exists] *************************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:52
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215141.396909-162043410254622 `" && echo ansible-tmp-1563215141.396909-162043410254622="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215141.396909-162043410254622 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/files/stat.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmpj5r88nf0 TO /Users/craig/.ansible/tmp/ansible-tmp-1563215141.396909-162043410254622/AnsiballZ_stat.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215141.396909-162043410254622/ /Users/craig/.ansible/tmp/ansible-tmp-1563215141.396909-162043410254622/AnsiballZ_stat.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215141.396909-162043410254622/AnsiballZ_stat.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215141.396909-162043410254622/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  invocation:
    module_args:
      checksum_algorithm: sha1
      follow: false
      get_attributes: true
      get_checksum: true
      get_md5: null
      get_mime: true
      path: /Users/craig/workshops/ansible/workshops/provisioner/tower_license.json
  stat:
    atime: 1563214558.0676525
    attr_flags: ''
    attributes: []
    birthtime: 1563211982.5709803
    block_size: 4096
    blocks: 8
    charset: unknown
    checksum: 2d455175eead1dda4a56076bad0a4f8e35516b60
    ctime: 1563211982.5714855
    dev: 16777220
    device_type: 0
    executable: false
    exists: true
    flags: 0
    generation: 0
    gid: 20
    gr_name: staff
    inode: 8485815
    isblk: false
    ischr: false
    isdir: false
    isfifo: false
    isgid: false
    islnk: false
    isreg: true
    issock: false
    isuid: false
    mimetype: unknown
    mode: '0644'
    mtime: 1563211982.5711377
    nlink: 1
    path: /Users/craig/workshops/ansible/workshops/provisioner/tower_license.json
    pw_name: craig
    readable: true
    rgrp: true
    roth: true
    rusr: true
    size: 465
    uid: 501
    version: null
    wgrp: false
    woth: false
    writeable: true
    wusr: true
    xgrp: false
    xoth: false
    xusr: false

TASK [debug] **********************************************************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:56
ok: [localhost] => 
  stat_result:
    changed: false
    failed: false
    stat:
      atime: 1563214558.0676525
      attr_flags: ''
      attributes: []
      birthtime: 1563211982.5709803
      block_size: 4096
      blocks: 8
      charset: unknown
      checksum: 2d455175eead1dda4a56076bad0a4f8e35516b60
      ctime: 1563211982.5714855
      dev: 16777220
      device_type: 0
      executable: false
      exists: true
      flags: 0
      generation: 0
      gid: 20
      gr_name: staff
      inode: 8485815
      isblk: false
      ischr: false
      isdir: false
      isfifo: false
      isgid: false
      islnk: false
      isreg: true
      issock: false
      isuid: false
      mimetype: unknown
      mode: '0644'
      mtime: 1563211982.5711377
      nlink: 1
      path: /Users/craig/workshops/ansible/workshops/provisioner/tower_license.json
      pw_name: craig
      readable: true
      rgrp: true
      roth: true
      rusr: true
      size: 465
      uid: 501
      version: null
      wgrp: false
      woth: false
      writeable: true
      wusr: true
      xgrp: false
      xoth: false
      xusr: false

TASK [fail] ***********************************************************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:58
skipping: [localhost] => changed=false 
  skip_reason: Conditional result was False

TASK [Install required roles onto THIS machine] ***********************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/provision_lab.yml:66
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215141.8951092-259940364882341 `" && echo ansible-tmp-1563215141.8951092-259940364882341="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215141.8951092-259940364882341 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/commands/command.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmpszo65yyl TO /Users/craig/.ansible/tmp/ansible-tmp-1563215141.8951092-259940364882341/AnsiballZ_command.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215141.8951092-259940364882341/ /Users/craig/.ansible/tmp/ansible-tmp-1563215141.8951092-259940364882341/AnsiballZ_command.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215141.8951092-259940364882341/AnsiballZ_command.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215141.8951092-259940364882341/ > /dev/null 2>&1 && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
changed: [localhost] => (item=geerlingguy.repo-epel) => changed=true 
  ansible_loop_var: item
  cmd: ansible-galaxy install geerlingguy.repo-epel -f --force-with-deps -p ./roles/
  delta: '0:00:10.496114'
  end: '2019-07-15 20:25:52.570680'
  invocation:
    module_args:
      _raw_params: ansible-galaxy install geerlingguy.repo-epel -f --force-with-deps -p ./roles/
      _uses_shell: true
      argv: null
      chdir: null
      creates: null
      executable: null
      removes: null
      stdin: null
      stdin_add_newline: true
      strip_empty_ends: true
      warn: true
  item: geerlingguy.repo-epel
  rc: 0
  start: '2019-07-15 20:25:42.074566'
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    - changing role geerlingguy.repo-epel from 1.2.4 to unspecified
    - downloading role 'repo-epel', owned by geerlingguy
    - downloading role from https://github.com/geerlingguy/ansible-role-repo-epel/archive/1.2.4.tar.gz
    - extracting geerlingguy.repo-epel to /Users/craig/workshops/ansible/workshops/provisioner/roles/geerlingguy.repo-epel
    - geerlingguy.repo-epel (1.2.4) was installed successfully
  stdout_lines: <omitted>
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215152.6141682-245197116504446 `" && echo ansible-tmp-1563215152.6141682-245197116504446="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215152.6141682-245197116504446 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/commands/command.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmpl707qcw2 TO /Users/craig/.ansible/tmp/ansible-tmp-1563215152.6141682-245197116504446/AnsiballZ_command.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215152.6141682-245197116504446/ /Users/craig/.ansible/tmp/ansible-tmp-1563215152.6141682-245197116504446/AnsiballZ_command.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215152.6141682-245197116504446/AnsiballZ_command.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215152.6141682-245197116504446/ > /dev/null 2>&1 && sleep 0'
changed: [localhost] => (item=ansible_security.ids_config) => changed=true 
  ansible_loop_var: item
  cmd: ansible-galaxy install ansible_security.ids_config -f --force-with-deps -p ./roles/
  delta: '0:00:09.753841'
  end: '2019-07-15 20:26:02.597437'
  invocation:
    module_args:
      _raw_params: ansible-galaxy install ansible_security.ids_config -f --force-with-deps -p ./roles/
      _uses_shell: true
      argv: null
      chdir: null
      creates: null
      executable: null
      removes: null
      stdin: null
      stdin_add_newline: true
      strip_empty_ends: true
      warn: true
  item: ansible_security.ids_config
  rc: 0
  start: '2019-07-15 20:25:52.843596'
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    - changing role ansible_security.ids_config from master to unspecified
    - downloading role 'ids_config', owned by ansible_security
    - downloading role from https://github.com/ansible-security/ids_config/archive/master.tar.gz
    - extracting ansible_security.ids_config to /Users/craig/workshops/ansible/workshops/provisioner/roles/ansible_security.ids_config
    - ansible_security.ids_config (master) was installed successfully
  stdout_lines: <omitted>
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215162.63964-247484114796268 `" && echo ansible-tmp-1563215162.63964-247484114796268="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215162.63964-247484114796268 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/commands/command.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmpz6o2atry TO /Users/craig/.ansible/tmp/ansible-tmp-1563215162.63964-247484114796268/AnsiballZ_command.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215162.63964-247484114796268/ /Users/craig/.ansible/tmp/ansible-tmp-1563215162.63964-247484114796268/AnsiballZ_command.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215162.63964-247484114796268/AnsiballZ_command.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215162.63964-247484114796268/ > /dev/null 2>&1 && sleep 0'
changed: [localhost] => (item=ansible_security.ids_install) => changed=true 
  ansible_loop_var: item
  cmd: ansible-galaxy install ansible_security.ids_install -f --force-with-deps -p ./roles/
  delta: '0:00:08.682325'
  end: '2019-07-15 20:26:11.571536'
  invocation:
    module_args:
      _raw_params: ansible-galaxy install ansible_security.ids_install -f --force-with-deps -p ./roles/
      _uses_shell: true
      argv: null
      chdir: null
      creates: null
      executable: null
      removes: null
      stdin: null
      stdin_add_newline: true
      strip_empty_ends: true
      warn: true
  item: ansible_security.ids_install
  rc: 0
  start: '2019-07-15 20:26:02.889211'
  stderr: ''
  stderr_lines: <omitted>
  stdout: |-
    - changing role ansible_security.ids_install from master to unspecified
    - downloading role 'ids_install', owned by ansible_security
    - downloading role from https://github.com/ansible-security/ids_install/archive/master.tar.gz
    - extracting ansible_security.ids_install to /Users/craig/workshops/ansible/workshops/provisioner/roles/ansible_security.ids_install
    - ansible_security.ids_install (master) was installed successfully
  stdout_lines: <omitted>
META: ran handlers
META: ran handlers

PLAY [Create lab instances in AWS] ************************************************************
META: ran handlers

TASK [manage_ec2_instances : include_tasks] ***************************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/main.yml:1
skipping: [localhost] => changed=false 
  skip_reason: Conditional result was False

TASK [manage_ec2_instances : provision aws resources and instances] ***************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/main.yml:6
included: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/provision.yml for localhost

TASK [manage_ec2_instances : ensure workshop folder CraigASA exists] **************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/provision.yml:1
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215171.742141-272209862964837 `" && echo ansible-tmp-1563215171.742141-272209862964837="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215171.742141-272209862964837 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/files/file.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmp_g7kygjs TO /Users/craig/.ansible/tmp/ansible-tmp-1563215171.742141-272209862964837/AnsiballZ_file.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215171.742141-272209862964837/ /Users/craig/.ansible/tmp/ansible-tmp-1563215171.742141-272209862964837/AnsiballZ_file.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215171.742141-272209862964837/AnsiballZ_file.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215171.742141-272209862964837/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  diff:
    after:
      path: /Users/craig/workshops/ansible/workshops/provisioner/CraigASA
    before:
      path: /Users/craig/workshops/ansible/workshops/provisioner/CraigASA
  gid: 20
  group: staff
  invocation:
    module_args:
      _diff_peek: null
      _original_basename: null
      access_time: null
      access_time_format: '%Y%m%d%H%M.%S'
      attributes: null
      backup: null
      content: null
      delimiter: null
      directory_mode: null
      follow: true
      force: false
      group: null
      mode: null
      modification_time: null
      modification_time_format: '%Y%m%d%H%M.%S'
      owner: null
      path: /Users/craig/workshops/ansible/workshops/provisioner/CraigASA
      recurse: false
      regexp: null
      remote_src: null
      selevel: null
      serole: null
      setype: null
      seuser: null
      src: null
      state: directory
      unsafe_writes: null
  mode: '0755'
  owner: craig
  path: /Users/craig/workshops/ansible/workshops/provisioner/CraigASA
  size: 96
  state: directory
  uid: 501

TASK [manage_ec2_instances : provision aws resources] *****************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/provision.yml:8
included: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml for localhost

TASK [manage_ec2_instances : Create AWS VPC CraigASA-vpc] *************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml:1
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215172.367015-201260610876377 `" && echo ansible-tmp-1563215172.367015-201260610876377="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215172.367015-201260610876377 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/cloud/amazon/ec2_vpc_net.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmp56q7rbvy TO /Users/craig/.ansible/tmp/ansible-tmp-1563215172.367015-201260610876377/AnsiballZ_ec2_vpc_net.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215172.367015-201260610876377/ /Users/craig/.ansible/tmp/ansible-tmp-1563215172.367015-201260610876377/AnsiballZ_ec2_vpc_net.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215172.367015-201260610876377/AnsiballZ_ec2_vpc_net.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215172.367015-201260610876377/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  attempts: 1
  invocation:
    module_args:
      aws_access_key: null
      aws_secret_key: null
      cidr_block:
      - 172.16.0.0/16
      debug_botocore_endpoint_logs: false
      dhcp_opts_id: null
      dns_hostnames: true
      dns_support: true
      ec2_url: null
      multi_ok: false
      name: CraigASA-vpc
      profile: null
      purge_cidrs: false
      region: us-east-1
      security_token: null
      state: present
      tags:
        Info: Username that provisioned this-> ocpdemo
        Linklight: This was provisioned through the linklight provisioner
        Name: CraigASA-vpc
        Students: 1
        Username: ocpdemo
      tenancy: default
      validate_certs: true
  vpc:
    cidr_block: 172.16.0.0/16
    cidr_block_association_set:
    - association_id: vpc-cidr-assoc-064994da7b733cf27
      cidr_block: 172.16.0.0/16
      cidr_block_state:
        state: associated
    classic_link_enabled: false
    dhcp_options_id: dopt-32cace49
    id: vpc-088702a2055bf342a
    instance_tenancy: default
    is_default: false
    owner_id: '511538502769'
    state: available
    tags:
      Info: Username that provisioned this-> ocpdemo
      Linklight: This was provisioned through the linklight provisioner
      Name: CraigASA-vpc
      Students: '1'
      Username: ocpdemo

TASK [manage_ec2_instances : Create EC2 security group for VPC named CraigASA-vpc] ************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml:16
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215178.108323-65962481153618 `" && echo ansible-tmp-1563215178.108323-65962481153618="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215178.108323-65962481153618 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/cloud/amazon/ec2_group.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmpf_kvjltq TO /Users/craig/.ansible/tmp/ansible-tmp-1563215178.108323-65962481153618/AnsiballZ_ec2_group.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215178.108323-65962481153618/ /Users/craig/.ansible/tmp/ansible-tmp-1563215178.108323-65962481153618/AnsiballZ_ec2_group.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215178.108323-65962481153618/AnsiballZ_ec2_group.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215178.108323-65962481153618/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  attempts: 1
  description: all ports open
  group_id: sg-0c4a3c8355c6714be
  group_name: CraigASA-insecure_all
  invocation:
    module_args:
      aws_access_key: null
      aws_secret_key: null
      debug_botocore_endpoint_logs: false
      description: all ports open
      ec2_url: null
      group_id: null
      name: CraigASA-insecure_all
      profile: null
      purge_rules: true
      purge_rules_egress: true
      purge_tags: true
      region: us-east-1
      rules:
      - cidr_ip: 0.0.0.0/0
        from_port: -1
        proto: 47
        to_port: -1
      - cidr_ip: 0.0.0.0/0
        from_port: 443
        proto: tcp
        to_port: 443
      - cidr_ip: 0.0.0.0/0
        from_port: -1
        proto: icmp
        to_port: -1
      - cidr_ip: 0.0.0.0/0
        from_port: 80
        proto: tcp
        to_port: 80
      - cidr_ip: 0.0.0.0/0
        from_port: 22
        proto: tcp
        to_port: 22
      - cidr_ip: 0.0.0.0/0
        from_port: 3389
        proto: tcp
        to_port: 3389
      - cidr_ip: 0.0.0.0/0
        from_port: 8888
        proto: tcp
        to_port: 8888
      - cidr_ip: 0.0.0.0/0
        from_port: 8000
        proto: tcp
        to_port: 8000
      - cidr_ip: 0.0.0.0/0
        from_port: 8080
        proto: tcp
        to_port: 8080
      - cidr_ip: 0.0.0.0/0
        from_port: 8088
        proto: tcp
        to_port: 8088
      - cidr_ip: 0.0.0.0/0
        from_port: 8089
        proto: tcp
        to_port: 8089
      - cidr_ip: 0.0.0.0/0
        from_port: 8443
        proto: tcp
        to_port: 8443
      - cidr_ip: 0.0.0.0/0
        from_port: 830
        proto: tcp
        to_port: 830
      - cidr_ip: 0.0.0.0/0
        from_port: 179
        proto: tcp
        to_port: 179
      rules_egress:
      - cidr_ip: 0.0.0.0/0
        proto: all
      security_token: null
      state: present
      tags:
        Info: Username that provisioned this-> ocpdemo
        Linklight: This was provisioned through the linklight provisioner
        Students: 1
        Username: ocpdemo
      validate_certs: true
      vpc_id: vpc-088702a2055bf342a
  ip_permissions:
  - from_port: 80
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 80
    user_id_group_pairs: []
  - from_port: 8080
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 8080
    user_id_group_pairs: []
  - from_port: 8443
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 8443
    user_id_group_pairs: []
  - from_port: 830
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 830
    user_id_group_pairs: []
  - ip_protocol: '47'
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    user_id_group_pairs: []
  - from_port: 8088
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 8088
    user_id_group_pairs: []
  - from_port: 3389
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 3389
    user_id_group_pairs: []
  - from_port: 443
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 443
    user_id_group_pairs: []
  - from_port: 179
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 179
    user_id_group_pairs: []
  - from_port: -1
    ip_protocol: icmp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: -1
    user_id_group_pairs: []
  - from_port: 8888
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 8888
    user_id_group_pairs: []
  - from_port: 8000
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 8000
    user_id_group_pairs: []
  - from_port: 22
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 22
    user_id_group_pairs: []
  - from_port: 8089
    ip_protocol: tcp
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    to_port: 8089
    user_id_group_pairs: []
  ip_permissions_egress:
  - ip_protocol: '-1'
    ip_ranges:
    - cidr_ip: 0.0.0.0/0
    ipv6_ranges: []
    prefix_list_ids: []
    user_id_group_pairs: []
  owner_id: '511538502769'
  tags:
    Info: Username that provisioned this-> ocpdemo
    Linklight: This was provisioned through the linklight provisioner
    Students: '1'
    Username: ocpdemo
  vpc_id: vpc-088702a2055bf342a

TASK [manage_ec2_instances : Create subnet for CraigASA-vpc] **********************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml:92
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215182.1023822-155492502025886 `" && echo ansible-tmp-1563215182.1023822-155492502025886="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215182.1023822-155492502025886 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/cloud/amazon/ec2_vpc_subnet.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmp7wg886ay TO /Users/craig/.ansible/tmp/ansible-tmp-1563215182.1023822-155492502025886/AnsiballZ_ec2_vpc_subnet.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215182.1023822-155492502025886/ /Users/craig/.ansible/tmp/ansible-tmp-1563215182.1023822-155492502025886/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215182.1023822-155492502025886/AnsiballZ_ec2_vpc_subnet.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215182.1023822-155492502025886/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  attempts: 1
  invocation:
    module_args:
      assign_instances_ipv6: false
      aws_access_key: null
      aws_secret_key: null
      az: us-east-1a
      cidr: 172.16.0.0/16
      debug_botocore_endpoint_logs: false
      ec2_url: null
      ipv6_cidr: ''
      map_public: false
      profile: null
      purge_tags: true
      region: us-east-1
      resource_tags:
        Info: Username that provisioned this-> ocpdemo
        Linklight: This was provisioned through the linklight provisioner
        Name: CraigASA-subnet
        Students: 1
        Username: ocpdemo
      security_token: null
      state: present
      tags:
        Info: Username that provisioned this-> ocpdemo
        Linklight: This was provisioned through the linklight provisioner
        Name: CraigASA-subnet
        Students: 1
        Username: ocpdemo
      validate_certs: true
      vpc_id: vpc-088702a2055bf342a
      wait: true
      wait_timeout: 600
  subnet:
    assign_ipv6_address_on_creation: false
    availability_zone: us-east-1a
    availability_zone_id: use1-az1
    available_ip_address_count: 65531
    cidr_block: 172.16.0.0/16
    default_for_az: false
    id: subnet-0dbc5cc9788149173
    ipv6_association_id: ''
    ipv6_cidr_block: ''
    ipv6_cidr_block_association_set: []
    map_public_ip_on_launch: false
    owner_id: '511538502769'
    state: available
    subnet_arn: arn:aws:ec2:us-east-1:511538502769:subnet/subnet-0dbc5cc9788149173
    tags:
      Info: Username that provisioned this-> ocpdemo
      Linklight: This was provisioned through the linklight provisioner
      Name: CraigASA-subnet
      Students: '1'
      Username: ocpdemo
    vpc_id: vpc-088702a2055bf342a

TASK [manage_ec2_instances : vpc internet gateway is present for vpc-088702a2055bf342a] *******
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml:110
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215185.78704-186132557935419 `" && echo ansible-tmp-1563215185.78704-186132557935419="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215185.78704-186132557935419 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/cloud/amazon/ec2_vpc_igw.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmpzf8mfl76 TO /Users/craig/.ansible/tmp/ansible-tmp-1563215185.78704-186132557935419/AnsiballZ_ec2_vpc_igw.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215185.78704-186132557935419/ /Users/craig/.ansible/tmp/ansible-tmp-1563215185.78704-186132557935419/AnsiballZ_ec2_vpc_igw.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215185.78704-186132557935419/AnsiballZ_ec2_vpc_igw.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215185.78704-186132557935419/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  attempts: 1
  gateway_id: igw-0f18146f0b06f6a47
  invocation:
    module_args:
      aws_access_key: null
      aws_secret_key: null
      debug_botocore_endpoint_logs: false
      ec2_url: null
      profile: null
      region: us-east-1
      security_token: null
      state: present
      tags:
        Info: Username that provisioned this-> ocpdemo
        Linklight: This was provisioned through the linklight provisioner
        Students: Total 1
        Username: ocpdemo
      validate_certs: true
      vpc_id: vpc-088702a2055bf342a
  tags:
    Info: Username that provisioned this-> ocpdemo
    Linklight: This was provisioned through the linklight provisioner
    Students: Total 1
    Username: ocpdemo
  vpc_id: vpc-088702a2055bf342a

TASK [manage_ec2_instances : vpc public subnet route table is present for vpc-088702a2055bf342a] ***
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml:124
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215188.2458959-182407019164462 `" && echo ansible-tmp-1563215188.2458959-182407019164462="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215188.2458959-182407019164462 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/cloud/amazon/ec2_vpc_route_table.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmpusg9i4hx TO /Users/craig/.ansible/tmp/ansible-tmp-1563215188.2458959-182407019164462/AnsiballZ_ec2_vpc_route_table.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215188.2458959-182407019164462/ /Users/craig/.ansible/tmp/ansible-tmp-1563215188.2458959-182407019164462/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215188.2458959-182407019164462/AnsiballZ_ec2_vpc_route_table.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215188.2458959-182407019164462/ > /dev/null 2>&1 && sleep 0'
changed: [localhost] => changed=true 
  attempts: 1
  invocation:
    module_args:
      aws_access_key: null
      aws_secret_key: null
      debug_botocore_endpoint_logs: false
      ec2_url: null
      lookup: tag
      profile: null
      propagating_vgw_ids: null
      purge_routes: true
      purge_subnets: true
      purge_tags: false
      region: us-east-1
      route_table_id: null
      routes:
      - destination_cidr_block: 0.0.0.0/0
        gateway_id: igw-0f18146f0b06f6a47
      security_token: null
      state: present
      subnets:
      - subnet-0dbc5cc9788149173
      tags:
        Info: Username that provisioned this-> ocpdemo
        Linklight: This was provisioned through the linklight provisioner
        Students: 1
        Username: ocpdemo
      validate_certs: true
      vpc_id: vpc-088702a2055bf342a
  route_table:
    associations:
    - main: false
      route_table_association_id: rtbassoc-00e58f6ce985dd9c3
      route_table_id: rtb-060c7bb579e376778
      subnet_id: subnet-0dbc5cc9788149173
    id: rtb-060c7bb579e376778
    owner_id: '511538502769'
    propagating_vgws: []
    route_table_id: rtb-060c7bb579e376778
    routes:
    - destination_cidr_block: 172.16.0.0/16
      gateway_id: local
      origin: CreateRouteTable
      state: active
    - destination_cidr_block: 0.0.0.0/0
      gateway_id: igw-0f18146f0b06f6a47
      origin: CreateRoute
      state: active
    tags:
      Info: Username that provisioned this-> ocpdemo
      Linklight: This was provisioned through the linklight provisioner
      Students: '1'
      Username: ocpdemo
    vpc_id: vpc-088702a2055bf342a

TASK [manage_ec2_instances : set variables for instance creation dynamically since VPC was not supplied by user] ***
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml:143
ok: [localhost] => changed=false 
  ansible_facts:
    ec2_security_group: CraigASA-insecure_all
    ec2_vpc_id: vpc-088702a2055bf342a
    ec2_vpc_subnet_id: subnet-0dbc5cc9788149173

TASK [manage_ec2_instances : Create ssh key pair for workshop CraigASA] ***********************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml:150
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215200.5691252-173332641558235 `" && echo ansible-tmp-1563215200.5691252-173332641558235="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215200.5691252-173332641558235 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/cloud/amazon/ec2_key.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmp16z8u4_0 TO /Users/craig/.ansible/tmp/ansible-tmp-1563215200.5691252-173332641558235/AnsiballZ_ec2_key.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215200.5691252-173332641558235/ /Users/craig/.ansible/tmp/ansible-tmp-1563215200.5691252-173332641558235/AnsiballZ_ec2_key.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215200.5691252-173332641558235/AnsiballZ_ec2_key.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215200.5691252-173332641558235/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  invocation:
    module_args:
      aws_access_key: null
      aws_secret_key: null
      debug_botocore_endpoint_logs: false
      ec2_url: null
      force: true
      key_material: null
      name: CraigASA-key
      profile: null
      region: us-east-1
      security_token: null
      state: present
      validate_certs: true
      wait: false
      wait_timeout: 300
  key:
    fingerprint: 7b:a0:9b:dc:be:1b:25:84:8b:bf:00:73:7a:e9:10:86:9d:b1:5d:cd
    name: CraigASA-key
  msg: key pair already exists

TASK [manage_ec2_instances : save private key] ************************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml:156
skipping: [localhost] => changed=false 
  skip_reason: Conditional result was False

TASK [manage_ec2_instances : debugging all variables for ec2 instance creation VPC-1] *********
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/resources.yml:163
ok: [localhost] => 
  msg:
  - 'ec2_name_prefix: CraigASA'
  - 'ec2_vpc_id: vpc-088702a2055bf342a'
  - 'CraigASA-key: CraigASA-key'
  - 'ec2_security_group: CraigASA-insecure_all'
  - 'ec2_vpc_subnet_id: subnet-0dbc5cc9788149173'

TASK [manage_ec2_instances : provision networking aws resources] ******************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/provision.yml:12
skipping: [localhost] => changed=false 
  skip_reason: Conditional result was False

TASK [manage_ec2_instances : find ami for ansible control node] *******************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/provision.yml:16
<127.0.0.1> ESTABLISH LOCAL CONNECTION FOR USER: craig
<127.0.0.1> EXEC /bin/sh -c 'echo ~craig && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '( umask 77 && mkdir -p "` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215202.64304-51108667274611 `" && echo ansible-tmp-1563215202.64304-51108667274611="` echo /Users/craig/.ansible/tmp/ansible-tmp-1563215202.64304-51108667274611 `" ) && sleep 0'
Using module file /Users/craig/Library/Python/3.7/lib/python/site-packages/ansible/modules/cloud/amazon/ec2_ami_facts.py
<127.0.0.1> PUT /Users/craig/.ansible/tmp/ansible-local-11160mlutnlre/tmp5vsac8re TO /Users/craig/.ansible/tmp/ansible-tmp-1563215202.64304-51108667274611/AnsiballZ_ec2_ami_facts.py
<127.0.0.1> EXEC /bin/sh -c 'chmod u+x /Users/craig/.ansible/tmp/ansible-tmp-1563215202.64304-51108667274611/ /Users/craig/.ansible/tmp/ansible-tmp-1563215202.64304-51108667274611/AnsiballZ_ec2_ami_facts.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c '/usr/local/opt/python/bin/python3.7 /Users/craig/.ansible/tmp/ansible-tmp-1563215202.64304-51108667274611/AnsiballZ_ec2_ami_facts.py && sleep 0'
<127.0.0.1> EXEC /bin/sh -c 'rm -f -r /Users/craig/.ansible/tmp/ansible-tmp-1563215202.64304-51108667274611/ > /dev/null 2>&1 && sleep 0'
ok: [localhost] => changed=false 
  images: []
  invocation:
    module_args:
      aws_access_key: null
      aws_secret_key: null
      debug_botocore_endpoint_logs: false
      describe_image_attributes: false
      ec2_url: null
      executable_users: []
      filters:
        architecture: x86_64
        name: RHEL-7.6_HVM-20190515-x86_64-0-Access2-GP2
        owner-id:
        - '309956199498'
      image_ids: []
      owners:
      - '309956199498'
      profile: null
      region: us-east-1
      security_token: null
      validate_certs: true

TASK [manage_ec2_instances : Debug AMI from region] *******************************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/provision.yml:27
ok: [localhost] => 
  amis:
    changed: false
    failed: false
    images: []

TASK [manage_ec2_instances : save ami for ansible control node] *******************************
task path: /Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/provision.yml:33
fatal: [localhost]: FAILED! => 
  msg: |-
    The task includes an option with an undefined variable. The error was: No last item, sequence was empty.
  
    The error appears to be in '/Users/craig/workshops/ansible/workshops/provisioner/roles/manage_ec2_instances/tasks/provision.yml': line 33, column 3, but may
    be elsewhere in the file depending on the exact syntax problem.
  
    The offending line appears to be:
  
  
    - name: save ami for ansible control node
      ^ here

PLAY RECAP ************************************************************************************
localhost                  : ok=28   changed=3    unreachable=0    failed=1    skipped=7    rescued=0    ignored=0   

